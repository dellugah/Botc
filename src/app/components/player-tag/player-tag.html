<div class="player_list">
  @for( player of players.players; track player){
    <div class="player_tag">
      <div class="player_cont">
        <div class="player_profile">
          <img class="player_class_pic" src="{{player.playerRole.roleImage.toLowerCase()}}" alt="poisoner" (click)="(player.isDead = true)">

          @if(player.isDead){
            <img class="death_token active" src="/death_Token.png" alt="dead" (click)="(player.isDead = false)">
          }
          @else{
            <img class="death_token" src="/death_Token.png" alt="dead">
          }

          <div class="player_info">
            <h2 class="player_class"><span class="{{player.playerAlignment}}">{{player.playerRole.roleName.toUpperCase()}}</span></h2>
            <div class="player_status">
              @if(player.playerRole.roleName != player.registeredAs.roleName){
                <img src="{{player.registeredAs.roleImage.toLowerCase()}}" alt="" width="auto" height="200%">
              }
              @if(player.isDrunk){
                <img src="/drunk.webp" alt="" width="auto" height="200%">
              }
            </div>
            <h3 class="player_name">Player: {{player.playerName}}</h3>
          </div>
        </div>
        <div class="player_ability">
          @if (player.playerRole.roleName === Roles.MONK) {
            <h2>Protects:</h2>
            <select [(ngModel)]="this.protectedPlayer" (ngModelChange)="monkTarget(player, $event)">
              <option [ngValue]=""></option>
              @for (p of players.players; track p) {
                <option [ngValue]="p">{{ p.playerRole.roleName }}</option>
              }
            </select>
          } @else if (player.playerRole.roleName === Roles.POISONER) {
            <h2>Poisons:</h2>
            <select [(ngModel)]="this.poisonedPlayer" (ngModelChange)="poisonerTarget($event)">
              <option [ngValue]=""></option>
              @for (p of players.players; track p) {
                <option [ngValue]="p">{{ p.playerRole.roleName }}</option>
              }
            </select>
          } @else if ([Roles.FORTUNE_TELLER, Roles.EMPATH].includes(player.playerRole.roleName)) {
            @if(player.hasAbility){
              <h2>Choose:</h2>
              <select>
                <option value="1"></option>
                @for (player of players.players; track player) {
                  <option [value]="player">{{ player.playerRole.roleName }}</option>
                }
              </select>
              <h2>and</h2>
              <select>
                <option value="1"></option>
                  @for (player of players.players; track player) {
                    <option [value]="player">{{ player.playerRole.roleName }}</option>
                  }
              </select>
              <h2>Learn:</h2>
              <select name="" id="">
                <option value=""></option>
                <option value="no">NO</option>
                <option value="yes">YES</option>
              </select>
            }
          } @else if ([Roles.UNDERTAKER].includes(player.playerRole.roleName)) {
            <h2>See:</h2>
            <select>
              <option value="1"></option>
              @for (player of players.players; track player) {
                @if(player.isDead){
                <option [value]="player">{{ player.playerRole.roleName }}</option>
                }
              }
            </select>
          } @else if ([Roles.RECLUSE, Roles.SPY].includes(player.playerRole.roleName)) {
            <h2>Registers as:</h2>
              <select [(ngModel)]="player.registeredAs.roleName" (ngModelChange)="registerAs(player, $event)">
                <option value=""></option>
                @for (role of Object.values(Roles); track role) {
                  <option [value]="role">{{ role }}</option>
                }
              </select>
          } @else if (player.playerRole.roleName === Roles.IMP) {
            <h2>Kills:</h2>
            <select>
              <option value=""></option>
              @for (player of players.players; track player) {
                @for (player of players.players; track player) {
                  <option [value]="player">{{ player.playerRole.roleName }}</option>
                }
              }
            </select>
          }
        </div>
        <div class="player_conditions">
          @if(player.isProtected){
            <img class="condition" src="/monk.webp" alt="protected">
          }
          @if(player.isPoisoned){
            <img class="condition" src="/poisoner.webp" alt="poisoned">
          }
          @if(player.isRedHearing){
            <img class="condition" src="/fortuneteller.webp" alt="Red Hearing">
          }
        </div>
      </div>
      <div class="player_options">
        <button><h2>Change Role</h2></button>
        <button><h2>Change Alignment </h2></button>
        <button><h2>Comments</h2></button>
      </div>
    </div>
  }
  <div id="ghost_tag"></div>
</div>
